<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZTKweb</title>
    <meta name="description" content="Mapa po≈ÇƒÖcze≈Ñ ≈õwiata KibelSMP: stacje, linie REGIO/METRO/IC, wyszukiwanie tras i podglƒÖd legendy.">
    <link rel="canonical" href="https://ztk.otworz.se/" />
    <meta property="og:type" content="website">
    <meta property="og:title" content="ZTKweb ‚Äì mapa po≈ÇƒÖcze≈Ñ ≈õwiata KibelSMP">
    <meta property="og:description" content="Stacje i linie (REGIO, METRO, IC), wyszukiwanie tras i legenda.">
    <meta property="og:url" content="https://ztk.otworz.se/">
    <meta property="og:image" content="https://ztk.otworz.se/assets/logo_ztk.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="ZTKweb ‚Äì mapa po≈ÇƒÖcze≈Ñ ≈õwiata KibelSMP">
    <meta name="twitter:description" content="Stacje i linie (REGIO, METRO, IC), wyszukiwanie tras i legenda.">
    <meta name="theme-color" content="#FFFFFF" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#181A21" media="(prefers-color-scheme: dark)">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/ios/180.png" sizes="180x180">
    <link rel="apple-touch-icon" href="assets/icons/ios/167.png" sizes="167x167">
    <link rel="apple-touch-icon" href="assets/icons/ios/152.png" sizes="152x152">
    <link rel="preload" as="fetch" href="assets/stations.json" crossorigin="anonymous">
    <link rel="preload" as="fetch" href="assets/lines.json" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/app.css">
    <link rel="icon" type="image/png" href="assets/favicon.png">
</head>
<body>
    <header class="topbar">
        <div class="container topbar-inner">
            <div class="brand">
                <img class="logo" src="assets/logo_ztk.png" alt="ZTK" />
                <span class="title">ZTKweb<span class="beta">BETA</span></span>
            </div>
            <div class="topbar-actions">
                <a class="btn-secondary link-plain" href="export.html" title="Eksport">Eksport</a>
                <a class="btn-secondary link-plain" href="https://github.com/KibelSMP/ZTKweb/issues/new?template=bug_report.yml" target="_blank" rel="noopener noreferrer" title="Zg≈Ço≈õ b≈ÇƒÖd w repozytorium (otworzy siƒô w nowej karcie)">üêû Zg≈Ço≈õ b≈ÇƒÖd</a>
                <button id="theme-toggle" class="theme-toggle" aria-label="Prze≈ÇƒÖcz motyw" title="Prze≈ÇƒÖcz motyw">
                    <span class="theme-icon" data-light>‚òÄÔ∏è</span>
                    <span class="theme-icon" data-dark>üåô</span>
                </button>
            </div>
        </div>
    </header>
    <noscript>
        <div class="container" role="alert" style="margin-top:12px">
            Ta strona wymaga JavaScript do dzia≈Çania (render mapy, wyszukiwarka tras). W≈ÇƒÖcz JS w przeglƒÖdarce.
        </div>
    </noscript>
    <main class="container">
        <div class="content">
            <div id="data-error" class="alert hidden" role="alert" aria-live="assertive"></div>
            <section id="search-panel" aria-label="Wyszukiwarka po≈ÇƒÖcze≈Ñ">
                <datalist id="stations-list"></datalist>
                <div class="station-search-row" aria-label="Szukaj stacji">
                    <div class="field">
                        <label for="station"><span class="label-icon" aria-hidden="true"></span>Szukaj stacji</label>
                        <input id="station" list="stations-list" placeholder="Nazwa stacji" />
                    </div>
                    <button id="station-clear" class="btn-clear" title="Wyczy≈õƒá" aria-label="Wyczy≈õƒá">‚úï</button>
                    <button id="station-search" class="btn-station-search" title="Poka≈º na mapie" aria-label="Poka≈º na mapie">Poka≈º</button>
                </div>
                <div class="or-divider" role="separator" aria-label="Oddziela wyszukiwarki"><span>albo</span></div>
        <div class="search-row">
                    <div class="field">
            <label for="from"><span class="label-icon" aria-hidden="true"></span>SkƒÖd</label>
                        <input id="from" list="stations-list" placeholder="Stacja poczƒÖtkowa (nazwa)" />
                    </div>
                    <button id="swap" class="btn-swap" title="Zamie≈Ñ kierunek" aria-label="Zamie≈Ñ kierunek">‚áÑ</button>
                    <div class="field">
            <label for="to"><span class="label-icon" aria-hidden="true"></span>DokƒÖd</label>
                        <input id="to" list="stations-list" placeholder="Stacja docelowa (nazwa)" />
                    </div>
                    <button id="route-clear" class="btn-clear" title="Wyczy≈õƒá" aria-label="Wyczy≈õƒá">‚úï</button>
                    <button id="search" class="btn-search">Szukaj</button>
                </div>
                <details id="type-filters" class="dropdown" aria-label="Filtr typ√≥w tras">
                    <summary><span class="dropdown-title">Typy tras</span><span class="dropdown-value" id="type-filters-summary">Wszystkie</span></summary>
                    <div class="filters-row">
                        <label title="InterCity"><input type="checkbox" class="line-type" data-type="IC" checked> InterCity</label>
                        <label title="Regionalne"><input type="checkbox" class="line-type" data-type="REGIO" checked> Regionalne</label>
                        <label title="Metro"><input type="checkbox" class="line-type" data-type="METRO" checked> Metro</label>
                        <label title="Na ≈ºƒÖdanie"><input type="checkbox" class="line-type" data-type="ON_DEMAND" checked> Na ≈ºƒÖdanie</label>
                    </div>
                </details>
                <details id="priority-options" class="dropdown" aria-label="Kryterium wyszukiwania">
                    <summary><span class="dropdown-title">Priorytet</span><span class="dropdown-value" id="priority-summary">Mniej przesiadek</span></summary>
                    <div class="filters-row">
                        <label title="Preferuj mniej przesiadek">
                            <input type="radio" name="priority" id="prio-transfers" value="transfers" checked>
                            Mniej przesiadek
                        </label>
                        <label title="Preferuj mniej przystank√≥w (kr√≥tszƒÖ liczbƒô odcink√≥w)">
                            <input type="radio" name="priority" id="prio-stops" value="stops">
                            Mniej przystank√≥w
                        </label>
                    </div>
                </details>
                <div id="search-results" aria-live="polite"></div>
                <aside class="promo-slot promo-below-search" role="complementary" aria-label="Informacja sponsorowana">
                    <a id="promo-link" href="https://discord.com/channels/865183769626279966/940688602667569202" target="_blank" rel="noopener noreferrer" aria-label="Miejsce na TwojƒÖ promocjƒô. Kliknij, aby otworzyƒá Discorda. Zwr√≥ƒá siƒô do gracza Miersetnik.">
                        <picture>
                            <img src="assets/promo-default.png" alt="Promocja">
                        </picture>
                    </a>
                </aside>
                <div id="mc-status" class="mc-status" aria-live="polite">
                    <span class="dot" aria-hidden="true"></span>
                    <span class="text">Sprawdzanie statusu‚Ä¶</span>
                </div>
            </section>
            <section class="map-section" aria-label="Mapa i po≈ÇƒÖczenia">
                <div id="map-viewport">
                    <div id="map"></div>
                    <div id="map-tools-top">
                        <div class="map-menu" id="map-layers-menu" aria-label="Warstwy mapy">
                            <div class="map-menu-row"><strong>Warstwy t≈Ça</strong></div>
                            <div class="map-menu-row" role="group" aria-label="Wybierz warstwy t≈Ça">
                                <label class="map-menu-option"><input type="checkbox" name="map-layer-satellite" value="satellite"> Satelitarna</label>
                                <label class="map-menu-option"><input type="checkbox" name="map-layer-political" value="political"> Polityczna</label>
                            </div>
                        </div>
                    </div>
                    <div id="map-controls">
                        <button id="zoom-in" class="zoom-btn" aria-label="Przybli≈º">+</button>
                        <button id="zoom-out" class="zoom-btn" aria-label="Oddal">‚àí</button>
                        <button id="zoom-reset" class="zoom-btn" aria-label="Reset">‚§ø</button>
                    </div>
                </div>
                <footer id="legend"></footer>
            </section>
        </div>
    </main>
        <footer class="site-footer" role="contentinfo">
            <div class="container footer-inner">
                <div class="footer-left">
                    <button id="contributors-open" class="link-plain btn-secondary" aria-haspopup="dialog" aria-controls="contributors-modal">Autorzy i wk≈Çad</button>
                </div>
                <div class="footer-right">Strona nie jest w ≈ºaden spos√≥b powiƒÖzana z firmƒÖ Microsoft, Mojang lub grƒÖ Minecraft.</div>
            </div>
        </footer>
        <!-- Contributors modal -->
        <div id="contributors-overlay" class="modal-overlay" aria-hidden="true"></div>
        <div id="contributors-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="contributors-title">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="contributors-title" class="modal-title">Autorzy i wk≈Çad</h2>
                    <button id="contributors-close" class="modal-close" aria-label="Zamknij">√ó</button>
                </div>
                <div id="contributors-content" class="modal-body" data-loaded=""></div>
            </div>
        </div>
    <script src="assets/map-zoom.js"></script>
    <script src="assets/map-renderer.js"></script>
    <script src="assets/route-search.js"></script>
    <script src="assets/legend-renderer.js"></script>
    <script src="assets/mc-status.js"></script>
    <script src="assets/promo.js"></script>
    <script src="assets/theme-toggle.js"></script>
    <script src="assets/map-layers.js"></script>
    <script src="assets/pwa-install.js"></script>
    <script src="assets/contributors.js"></script>
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', async () => {
                    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
                    if (isStandalone) {
                        navigator.serviceWorker.register('/sw.js').catch(() => {});
                    } else {
                        // In regular browser: ensure no SW is controlling, to avoid caching side-effects
                        try {
                            const regs = await navigator.serviceWorker.getRegistrations();
                            for (const r of regs) { try { await r.unregister(); } catch {} }
                        } catch {}
                        // When the app gets installed or switches to standalone, register SW then
                        window.addEventListener('appinstalled', () => {
                            navigator.serviceWorker.register('/sw.js').catch(() => {});
                        });
                        const mq = window.matchMedia('(display-mode: standalone)');
                        const onChange = (ev) => { if (ev.matches) navigator.serviceWorker.register('/sw.js').catch(() => {}); };
                        if (mq && mq.addEventListener) mq.addEventListener('change', onChange);
                        else if (mq && mq.addListener) mq.addListener(onChange);
                    }
                });
            }
        </script>
</body>
</html>